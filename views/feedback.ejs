<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Your Feedback - Propload</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .btn-primary-custom {
            background-color: #40788e;
            color: white;
            border: none;
        }
        .btn-primary-custom:hover {
            background-color: #2f5e6b;
            color: white;
        }
        .btn-outline-primary-custom {
            border: 2px solid #40788e;
            color: #40788e;
            background: transparent;
        }
        .btn-outline-primary-custom:hover {
            background: #40788e;
            color: white;
        }
        .rating-star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .rating-star:hover,
        .rating-star.active {
            color: #ffc107;
        }
        .star-filled {
            color: #ffc107;
        }
        .feedback-card {
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        .feedback-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(47, 108, 123, 0.15);
        }
    </style>
</head>
<body>
   

    <div class="container py-5 mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="text-center mb-5">
                    <h1 class="display-5 fw-bold mb-3" style="color: #2f6c7b;">Share Your Feedback</h1>
                    <p class="lead text-muted">We value your opinion and are constantly working to improve our services.</p>
                </div>


                <div class="card shadow-sm border-0">
                    <div class="card-body p-4">
                        <form action="/feedback" method="POST" class="needs-validation" novalidate>
                            <div class="row g-3">
                                <!-- Name -->
                                <div class="col-md-6">
                                    <label for="name" class="form-label">Full Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="name" name="name" required 
                                           placeholder="Enter your full name">
                                    <div class="invalid-feedback">Please provide your name.</div>
                                </div>

                                <!-- Email -->
                                <div class="col-md-6">
                                    <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" id="email" name="email" required 
                                           placeholder="Enter your email address">
                                    <div class="invalid-feedback">Please provide a valid email.</div>
                                </div>

                                <!-- Phone -->
                                <div class="col-md-6">
                                    <label for="phone" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" 
                                           placeholder="Enter your phone number">
                                </div>

                                <!-- User Type -->
                                <div class="col-md-6">
                                    <label for="userType" class="form-label">You are a</label>
                                    <select class="form-select" id="userType" name="userType">
                                        <option value="visitor">Visitor</option>
                                        <option value="customer">Customer</option>
                                        <option value="seller">Seller/Professional</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>

                                <!-- Category -->
                                <div class="col-12">
                                    <label for="category" class="form-label">Feedback Category</label>
                                    <select class="form-select" id="category" name="category">
                                        <option value="general">General Feedback</option>
                                        <option value="service">Service Feedback</option>
                                        <option value="technical">Technical Issue</option>
                                        <option value="suggestion">Suggestion</option>
                                        <option value="complaint">Complaint</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>

                                <!-- Rating -->
                                <div class="col-12">
                                    <label class="form-label">Rating <span class="text-danger">*</span></label>
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="rating-stars me-3" id="rating-stars">
                                            <span class="rating-star" data-rating="1">★</span>
                                            <span class="rating-star" data-rating="2">★</span>
                                            <span class="rating-star" data-rating="3">★</span>
                                            <span class="rating-star" data-rating="4">★</span>
                                            <span class="rating-star" data-rating="5">★</span>
                                        </div>
                                        <span id="rating-text" class="text-muted">Please select a rating</span>
                                    </div>
                                    <input type="hidden" id="rating" name="rating" required>
                                    <div class="invalid-feedback">Please select a rating.</div>
                                </div>

                                <!-- Subject -->
                                <div class="col-12">
                                    <label for="subject" class="form-label">Subject <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="subject" name="subject" required 
                                           placeholder="Brief subject of your feedback">
                                    <div class="invalid-feedback">Please provide a subject.</div>
                                </div>

                                <!-- Message -->
                                <div class="col-12">
                                    <label for="message" class="form-label">Your Feedback <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="message" name="message" rows="6" required 
                                              placeholder="Please share your detailed feedback, suggestions, or concerns..."></textarea>
                                    <div class="invalid-feedback">Please provide your feedback message.</div>
                                </div>

                                <!-- Submit Button -->
                                <div class="col-12 text-center mt-4">
                                    <button type="submit" class="btn btn-primary-custom btn-lg px-5">
                                        <i class="fas fa-paper-plane me-2"></i>Submit Feedback
                                    </button>
                                    <a href="/" class="btn btn-outline-secondary btn-lg ms-2">Cancel</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="text-center mt-5">
                    <p class="text-muted">
                        Want to see what others are saying? 
                        <a href="/all-feedbacks" class="text-decoration-none" style="color: #40788e;">
                            View all feedbacks
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <%- include('./partials/landingFooter') %>

    <script>
        // Rating stars functionality
        const ratingStars = document.querySelectorAll('.rating-star');
        const ratingInput = document.getElementById('rating');
        const ratingText = document.getElementById('rating-text');

        const ratingLabels = {
            1: 'Poor - Very dissatisfied',
            2: 'Fair - Somewhat dissatisfied',
            3: 'Good - Satisfied',
            4: 'Very Good - Happy with the service',
            5: 'Excellent - Extremely satisfied'
        };

        ratingStars.forEach(star => {
            star.addEventListener('click', () => {
                const rating = parseInt(star.getAttribute('data-rating'));
                ratingInput.value = rating;
                
                // Update stars appearance
                ratingStars.forEach((s, index) => {
                    if (index < rating) {
                        s.classList.add('star-filled');
                    } else {
                        s.classList.remove('star-filled');
                    }
                });

                // Update rating text
                ratingText.textContent = ratingLabels[rating];
                ratingText.className = rating >= 4 ? 'text-success' : 
                                     rating >= 3 ? 'text-warning' : 'text-danger';
            });
        });

        // Form validation
        (function() {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity() || !ratingInput.value) {
                        event.preventDefault();
                        event.stopPropagation();
                        
                        if (!ratingInput.value) {
                            alert('Please select a rating before submitting your feedback.');
                        }
                    }
                    
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>