<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>

<style>
  :root {
    --propload-primary: #e9e2b3;
    --propload-secondary: #2f6c7b;
    --surface: #ffffff;
    --muted: #6b7280;
    --card-shadow: 0 8px 20px rgba(47, 76, 86, 0.06);
  }

  .logout-btn {
    background: #ffffff;
    color: var(--propload-secondary);
    border: 1px solid rgba(15, 23, 42, 0.04);
    transition: background .2s, color .2s;
  }
  .logout-btn:hover {
    background: var(--propload-primary);
    color: #1f2937;
  }

  .sidebar {
    width: 280px;
    min-width: 280px;
    background: var(--surface);
    border-right: 1px solid rgba(15, 23, 42, 0.04);
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    z-index: 40;
    padding: 1.25rem;
    transition: transform .3s ease;
  }

  .menu-item {
    display: flex;
    align-items: center;
    gap: .875rem;
    padding: .625rem .75rem;
    border-radius: .75rem;
    color: var(--propload-secondary);
    font-weight: 600;
    transition: background .18s ease, transform .12s ease, color .12s ease;
  }
  .menu-item:hover {
    background: var(--propload-primary);
    color: var(--propload-secondary);
    transform: translateY(-2px);
  }
  .menu-item.active {
    background: linear-gradient(90deg, rgba(233,226,179,0.32), rgba(47,108,123,0.03));
    color: var(--propload-secondary);
    box-shadow: inset 0 0 0 1px rgba(47,108,123,0.04);
  }

  .menu-item i {
    width: 1.25rem;
    text-align: center;
    font-size: 1.05rem;
  }

  .drawer-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    z-index: 30;
    display: none;
  }
  .drawer-backdrop.show { display: block; }

  .muted { color: var(--muted); }
</style>

<!-- Sidebar -->
<aside id="sidebar"
  class="sidebar fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-50"
  aria-hidden="true">


  <div class="flex flex-col h-full">
    <!-- Logo + Profile -->
    <div class="flex items-center justify-between mb-6">
      <div class="cursor-pointer" onclick="window.location.href='/seller/profile'">
        <img src="/images/landing/logo.png" alt="Propload"
          class="h-12 w-auto object-contain" onerror="this.style.display='none'">

        <div class="flex items-center gap-2 mt-2">
          <div class="ml-3 w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center cursor-pointer">
            <i class="fas fa-user" style="color: var(--propload-secondary);"></i>
          </div>
          <div class="text-s muted">Seller</div>
        </div>
      </div>

      <button id="sidebarCloseBtn" class="lg:hidden p-2 rounded-md text-slate-500"
        aria-label="Close menu" title="Close menu">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 overflow-y-auto">
      <ul class="space-y-1">
        <li>
          <a href="/seller/dashboard"
            class="menu-item <%= (typeof active !== 'undefined' && active==='dashboard') ? 'active' : '' %>">
            <i class="fas fa-chart-line"></i><span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="/seller/find-bids"
            class="menu-item <%= (typeof active !== 'undefined' && active==='find-bids') ? 'active' : '' %>">
            <i class="fas fa-search"></i><span>Find Bids</span>
          </a>
        </li>
        <li>
          <a href="/seller/my-bids"
            class="menu-item <%= (typeof active !== 'undefined' && active==='my-bids') ? 'active' : '' %>">
            <i class="fas fa-list"></i><span>My Bids</span>
          </a>
        </li>
        <li>
          <a href="/seller/notices"
            class="menu-item <%= (typeof active !== 'undefined' && active==='notices') ? 'active' : '' %>">
            <i class="fas fa-bell"></i><span>Notices</span>
          </a>
        </li>
        <li>
          <a href="/seller/support"
            class="menu-item <%= (typeof active !== 'undefined' && active==='support') ? 'active' : '' %>">
            <i class="fas fa-headset"></i><span>Support</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Footer / Logout -->
    <div class="mt-6">
      <form action="/auth/logout" method="post" class="inline-block w-full">
        <button type="submit" class="w-full text-left px-3 py-2 rounded-md font-semibold logout-btn">
          <i class="fas fa-sign-out-alt mr-3"></i>
          <span>Logout</span>
        </button>
      </form>
    </div>
  </div>
</aside>

<!-- Backdrop for Mobile -->
<div id="drawerBackdrop"
  class="drawer-backdrop fixed inset-0 bg-black bg-opacity-30 hidden z-40 lg:hidden"></div>

<!-- Mobile Sidebar Toggle -->
<button id="openSidebarBtn"
  class="fixed top-4 left-4 z-50 lg:hidden bg-yellow-500 text-white p-2 rounded-md shadow-md">
  <i class="fas fa-bars"></i>
</button>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const sidebar = document.getElementById("sidebar");
    const openBtn = document.getElementById("openSidebarBtn");
    const closeBtn = document.getElementById("sidebarCloseBtn");
    const backdrop = document.getElementById("drawerBackdrop");

    const openSidebar = () => {
      sidebar.classList.remove("-translate-x-full");
      backdrop.classList.add("show");
      document.body.classList.add("overflow-hidden"); // prevent body scroll
      openSidebarBtn.classList.add("hidden"); // prevent body scroll
       // prevent body scroll
    };

    const closeSidebar = () => {
      sidebar.classList.add("-translate-x-full");
      backdrop.classList.remove("show");
      document.body.classList.remove("overflow-hidden");
      openSidebarBtn.classList.remove("hidden");
    };

    // Listeners
    openBtn?.addEventListener("click", openSidebar);
    closeBtn?.addEventListener("click", closeSidebar);
    backdrop?.addEventListener("click", closeSidebar);

    // Responsive reset (ensures sidebar reappears properly when resizing)
    window.addEventListener("resize", () => {
      if (window.innerWidth >= 1024) {
        sidebar.classList.remove("-translate-x-full");
        backdrop.classList.remove("show");
        document.body.classList.remove("overflow-hidden");
      } else {
        sidebar.classList.add("-translate-x-full");
      }
    });
  });
</script>

