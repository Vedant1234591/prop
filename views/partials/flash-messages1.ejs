<% if (typeof messages !== 'undefined' && (messages.error || messages.success || messages.info || messages.warning)) { %>
    <div class="max-w-7xl mx-auto px-4 py-3">
        <% if (messages.error) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 border border-red-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span><%= messages.error %></span>
                </div>
                <button type="button" class="text-red-500 hover:text-red-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (messages.success) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 border border-green-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span><%= messages.success %></span>
                </div>
                <button type="button" class="text-green-500 hover:text-green-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (messages.info) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 border border-blue-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-info-circle mr-2"></i>
                    <span><%= messages.info %></span>
                </div>
                <button type="button" class="text-blue-500 hover:text-blue-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (messages.warning) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 border border-yellow-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <span><%= messages.warning %></span>
                </div>
                <button type="button" class="text-yellow-500 hover:text-yellow-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
    </div>
<% } %>

<!-- Alternative flash messages structure for connect-flash -->
<% if (typeof locals.flash !== 'undefined') { %>
    <div class="max-w-7xl mx-auto px-4 py-3">
        <% if (locals.flash.error && locals.flash.error.length > 0) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 border border-red-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span><%= locals.flash.error %></span>
                </div>
                <button type="button" class="text-red-500 hover:text-red-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (locals.flash.success && locals.flash.success.length > 0) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 border border-green-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span><%= locals.flash.success %></span>
                </div>
                <button type="button" class="text-green-500 hover:text-green-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (locals.flash.info && locals.flash.info.length > 0) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 border border-blue-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-info-circle mr-2"></i>
                    <span><%= locals.flash.info %></span>
                </div>
                <button type="button" class="text-blue-500 hover:text-blue-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
        
        <% if (locals.flash.warning && locals.flash.warning.length > 0) { %>
            <div class="flex items-center justify-between p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 border border-yellow-200" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <span><%= locals.flash.warning %></span>
                </div>
                <button type="button" class="text-yellow-500 hover:text-yellow-700" onclick="this.parentElement.style.display='none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        <% } %>
    </div>
<% } %>

<!-- Auto-hide flash messages after 5 seconds -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-hide flash messages after 5 seconds
        const flashMessages = document.querySelectorAll('[role="alert"]');
        flashMessages.forEach(function(message) {
            setTimeout(function() {
                if (message.parentNode) {
                    message.style.opacity = '0';
                    message.style.transition = 'opacity 0.5s ease';
                    setTimeout(function() {
                        if (message.parentNode) {
                            message.parentNode.removeChild(message);
                        }
                    }, 500);
                }
            }, 5000);
        });
        
        // Manual close functionality
        const closeButtons = document.querySelectorAll('[role="alert"] button');
        closeButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                const alert = this.closest('[role="alert"]');
                if (alert && alert.parentNode) {
                    alert.parentNode.removeChild(alert);
                }
            });
        });
    });
</script>